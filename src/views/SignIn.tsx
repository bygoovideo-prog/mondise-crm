import React,{useState} from 'react'
import { supabase } from '../supabaseClient'
export default function SignIn(){const [email,setEmail]=useState('');const [password,setPassword]=useState('');const [mode,setMode]=useState<'signin'|'signup'>('signin');const [msg,setMsg]=useState('');const submit=async(e:React.FormEvent)=>{e.preventDefault();setMsg('');try{if(mode==='signin'){const {error}=await supabase.auth.signInWithPassword({email,password});if(error) throw error}else{const {error}=await supabase.auth.signUp({email,password});if(error) throw error;setMsg('Cuenta creada. Revisa tu email si se requiere verificación.')}}catch(err:any){setMsg(err.message||'Error')}};return(<div style={{maxWidth:420,margin:'5rem auto',padding:24}} className='card'><img src='/logo-mondise.png' alt='MONDISE CRM' style={{height:32}}/><p style={{color:'#555'}}>Acceso con email y contraseña</p><form onSubmit={submit} style={{display:'grid',gap:12}}><input placeholder='Email' value={email} onChange={e=>setEmail(e.target.value)} required/><input placeholder='Contraseña' type='password' value={password} onChange={e=>setPassword(e.target.value)} required/><div style={{display:'flex',gap:8}}><button type='submit' className='btn' style={{flex:1}}>{mode==='signin'?'Entrar':'Crear cuenta'}</button><button type='button' onClick={()=>setMode(mode==='signin'?'signup':'signin')} className='btn secondary'>{mode==='signin'?'Registrarme':'Tengo cuenta'}</button></div>{msg&&<div style={{color:'#b91c1c'}}>{msg}</div>}</form></div>)}
